# ğŸŒŸ PicoPics

> **ç°ä»£åŒ–ã€é«˜æ€§èƒ½çš„å›¾ç‰‡æ‰˜ç®¡æœåŠ¡** - åŸºäº Cloudflare ç”Ÿæ€ç³»ç»Ÿæ„å»º

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg?style=for-the-badge)](https://opensource.org/licenses/MIT)
[![Cloudflare](https://img.shields.io/badge/Cloudflare-F38020?style=for-the-badge&logo=cloudflare&logoColor=white)](https://cloudflare.com)
[![Next.js](https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=next.js&logoColor=white)](https://nextjs.org)
[![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)](https://tailwindcss.com)

<div align="center">
  <em>å®‰å…¨ Â· å¿«é€Ÿ Â· å…è´¹ Â· AI é©±åŠ¨ Â· å·²éƒ¨ç½²</em>
</div>

---

## âœ¨ ç‰¹æ€§äº®ç‚¹

### ğŸš€ é«˜æ€§èƒ½æ¶æ„
- **å…¨çƒ CDN åŠ é€Ÿ** - Cloudflare è¾¹ç¼˜ç½‘ç»œï¼Œå…¨çƒ 300+ ä¸ªæ•°æ®ä¸­å¿ƒ
- **æ¯«ç§’çº§å“åº”** - æ™ºèƒ½ç¼“å­˜å’Œè¾¹ç¼˜è®¡ç®—ä¼˜åŒ–
- **æ— é™æ‰©å±•** - æ— æœåŠ¡å™¨æ¶æ„ï¼ŒæŒ‰éœ€æ‰©å±•
- **å®æ—¶éƒ¨ç½²** - ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼Œè‡ªåŠ¨åŒ– CI/CD

### ğŸ”’ ä¼ä¸šçº§å®‰å…¨
- **GitHub OAuth è®¤è¯** - å®‰å…¨çš„èº«ä»½éªŒè¯ç³»ç»Ÿ
- **AI å†…å®¹å®¡æ ¸** - æ™ºèƒ½è¯†åˆ«å’Œè¿‡æ»¤ä¸å½“å†…å®¹
- **DDoS é˜²æŠ¤** - Cloudflare ä¼ä¸šçº§å®‰å…¨é˜²æŠ¤
- **å®‰å…¨é…ç½®** - æ•æ„Ÿä¿¡æ¯é€šè¿‡ wrangler secret ç®¡ç†ï¼Œç»ä¸æäº¤åˆ° Git
- **IP é»‘åå•** - è‡ªåŠ¨æ£€æµ‹å’Œå°ç¦æ»¥ç”¨è¡Œä¸º

### ğŸ¨ ç°ä»£åŒ–ä½“éªŒ
- **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **æ‹–æ‹½ä¸Šä¼ ** - æ”¯æŒæ‹–æ‹½ã€ç²˜è´´å’Œç‚¹å‡»ä¸Šä¼ 
- **å®æ—¶é¢„è§ˆ** - å³æ—¶å›¾ç‰‡é¢„è§ˆå’Œæ ¼å¼è½¬æ¢
- **å¤šæ ¼å¼æ”¯æŒ** - JPG, PNG, GIF, WebP, SVG
- **æ‰¹é‡ä¸Šä¼ ** - æ”¯æŒå¤šæ–‡ä»¶åŒæ—¶ä¸Šä¼ 

### ğŸ’° æˆæœ¬ä¼˜åŒ–
- **æŒ‰é‡ä»˜è´¹** - åªä¸ºå®é™…ä½¿ç”¨çš„å­˜å‚¨å’Œæµé‡ä»˜è´¹
- **æ™ºèƒ½å‹ç¼©** - è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡å¤§å°å’Œè´¨é‡
- **é•¿æœŸå­˜å‚¨** - åŸºäº Cloudflare R2 çš„æˆæœ¬æ•ˆç›Šå­˜å‚¨
- **é…é¢ç®¡ç†** - çµæ´»çš„ç”¨æˆ·é…é¢å’Œé€Ÿç‡é™åˆ¶

### ğŸ› ï¸ å¼€å‘è€…å‹å¥½
- **è‡ªåŠ¨åŒ–é…ç½®** - `configure.sh` è„šæœ¬ä¸€é”®é…ç½®æ‰€æœ‰ç¯å¢ƒ
- **å®‰å…¨éƒ¨ç½²** - `deploy.sh` è„šæœ¬ä¸€é”®éƒ¨ç½²æ‰€æœ‰ç»„ä»¶
- **å®Œæ•´æ–‡æ¡£** - è¯¦ç»†çš„é…ç½®å’Œéƒ¨ç½²æŒ‡å—
- **TypeScript** - å®Œæ•´çš„ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Node.js 18+
- npm æˆ– yarn
- Cloudflare è´¦æˆ·

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/your-username/PicoPics.git
   cd PicoPics
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   # å®‰è£…æ ¹ç›®å½•ä¾èµ–
   npm install
   
   # å®‰è£…æ‰€æœ‰ Worker ä¾èµ–
   cd uploader-worker && npm install && cd ..
   cd history-worker && npm install && cd ..
   cd r2-browser-worker && npm install && cd ..
   cd cdn-worker && npm install && cd ..
   cd CFworkerImageFRONTED && npm install && cd ..
   ```

3. **é…ç½® Cloudflare è´¦æˆ·**
   ```bash
   # ç™»å½• Cloudflareï¼ˆå¿…éœ€ï¼‰
   npx wrangler login
   
   # éªŒè¯ç™»å½•çŠ¶æ€
   npx wrangler whoami
   ```

4. **è¿è¡Œè‡ªåŠ¨é…ç½®è„šæœ¬**
   ```bash
   # ğŸš€ ä¸€é”®å®‰å…¨é…ç½®ï¼ˆæ¨èï¼‰
   ./configure.sh
   ```

5. **æ‰‹åŠ¨è®¾ç½®æ•æ„Ÿå˜é‡**
   ```bash
   # ç®¡ç†å‘˜é…ç½®
   npx wrangler secret put ADMIN_USERS --env production
   # è¾“å…¥: github_username1,github_username2
   
   npx wrangler secret put ADMIN_TOKEN --env production
   # è¾“å…¥: your-secure-admin-token
   
   # GitHub OAuth
   npx wrangler secret put GITHUB_CLIENT_ID --env production
   npx wrangler secret put GITHUB_CLIENT_SECRET --env production
   ```

6. **éƒ¨ç½²é¡¹ç›®**
   ```bash
   # éƒ¨ç½²æ‰€æœ‰ç»„ä»¶
   ./deploy.sh
   ```

ğŸ“– **ç¯å¢ƒé…ç½®æŒ‡å—**ï¼š[docs/ENVIRONMENT_SETUP.md](./docs/ENVIRONMENT_SETUP.md)

ğŸ“‹ **éƒ¨ç½²æ£€æŸ¥æ¸…å•**ï¼š[docs/DEPLOYMENT_CHECKLIST.md](./docs/DEPLOYMENT_CHECKLIST.md)

ğŸš€ **å¿«é€Ÿéƒ¨ç½²æŒ‡å—**ï¼š[docs/QUICK_DEPLOY.md](./docs/QUICK_DEPLOY.md)

ğŸ”§ **æ•…éšœæ’æŸ¥æŒ‡å—**ï¼š[docs/TROUBLESHOOTING.md](./docs/TROUBLESHOOTING.md)

ğŸ”’ **å®‰å…¨è¯´æ˜**ï¼š[docs/SECURITY.md](./docs/SECURITY.md)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
PicoPics/
â”œâ”€â”€ ğŸ“ cdn-worker/              # CDN å†…å®¹åˆ†å‘ Worker
â”œâ”€â”€ ğŸ“ uploader-worker/         # ä¸Šä¼ å¤„ç† Worker
â”œâ”€â”€ ğŸ“ history-worker/          # å†å²æŸ¥è¯¢ Worker
â”œâ”€â”€ ğŸ“ r2-browser-worker/       # ç®¡ç†ç•Œé¢ Worker
â”œâ”€â”€ ğŸ“ CFworkerImageFRONTED/    # Next.js å‰ç«¯åº”ç”¨
â”œâ”€â”€ ğŸ“ docs/                    # ğŸ“š æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ ENVIRONMENT_SETUP.md     # ğŸ“– ç¯å¢ƒé…ç½®æŒ‡å—
â”‚   â”œâ”€â”€ ğŸ“„ DEPLOYMENT_CHECKLIST.md  # ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•
â”‚   â”œâ”€â”€ ğŸ“„ QUICK_DEPLOY.md          # ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ ğŸ“„ TROUBLESHOOTING.md       # ğŸ”§ æ•…éšœæ’æŸ¥æŒ‡å—
â”‚   â””â”€â”€ ğŸ“„ SECURITY.md              # ğŸ”’ å®‰å…¨è¯´æ˜
â”œâ”€â”€ ğŸ“„ configure.sh             # ğŸ” å®‰å…¨ç¯å¢ƒé…ç½®è„šæœ¬
â”œâ”€â”€ ğŸ“„ deploy.sh                # ğŸš€ ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ ğŸ“„ env.template             # ğŸ“‹ ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ ğŸ“„ .gitignore               # ğŸš« Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ LICENSE                  # ğŸ“„ MIT è®¸å¯è¯
â””â”€â”€ ğŸ“„ README.md                # ğŸ“– é¡¹ç›®è¯´æ˜
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶         | æŠ€æœ¯æ ˆ                          | èŒè´£                         | éƒ¨ç½²çŠ¶æ€  |
| ------------ | ------------------------------- | ---------------------------- | --------- |
| **å‰ç«¯ç•Œé¢** | Next.js 14 + React + TypeScript | ç”¨æˆ·äº¤äº’å’Œæ–‡ä»¶ä¸Šä¼            | âœ… å·²éƒ¨ç½² |
| **ä¸Šä¼ æœåŠ¡** | Cloudflare Workers + AI         | èº«ä»½éªŒè¯ã€å†…å®¹å®¡æ ¸ã€æ–‡ä»¶å¤„ç† | âœ… å·²éƒ¨ç½² |
| **å­˜å‚¨å±‚**   | Cloudflare R2                   | é«˜æŒä¹…æ€§å¯¹è±¡å­˜å‚¨             | âœ… å·²é…ç½® |
| **æ•°æ®åº“**   | Cloudflare D1                   | å…ƒæ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢             | âœ… å·²é…ç½® |
| **ç¼“å­˜å±‚**   | Cloudflare KV                   | ç”¨æˆ·ä¼šè¯å’Œç¼“å­˜               | âœ… å·²é…ç½® |
| **çŠ¶æ€ç®¡ç†** | Durable Objects                 | é…é¢æ§åˆ¶å’Œé€Ÿç‡é™åˆ¶           | âœ… å·²éƒ¨ç½² |
| **ç®¡ç†ç•Œé¢** | Cloudflare Workers              | å­˜å‚¨æ¡¶å†…å®¹ç®¡ç†               | âœ… å·²éƒ¨ç½² |
| **å†å²æœåŠ¡** | Cloudflare Workers + D1         | ä¸Šä¼ å†å²æŸ¥è¯¢                 | âœ… å·²éƒ¨ç½² |
| **CDN ç½‘ç»œ** | Cloudflare CDN                  | å…¨çƒå†…å®¹åˆ†å‘å’Œç¼“å­˜           | âœ… å·²éƒ¨ç½² |

---

## ğŸ”§ API å‚è€ƒ

### ä¸Šä¼ æ¥å£
```typescript
POST /upload
Authorization: Bearer <token>
Content-Type: multipart/form-data

// å“åº”
{
  "success": true,
  "url": "https://cdn.example.com/image.jpg",
  "fileName": "image.jpg",
  "size": 1024000,
  "type": "image/jpeg"
}
```

### è·å–é…é¢
```typescript
GET /quota
Authorization: Bearer <token>

// å“åº”
{
  "used": 50000000,
  "limit": 100000000,
  "resetTime": "2024-12-31T23:59:59Z"
}
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

### ğŸš€ å¿«é€Ÿå¼€å§‹è´¡çŒ®
1. **Fork é¡¹ç›®** åˆ°ä½ çš„ GitHub è´¦æˆ·
2. **å…‹éš†åˆ°æœ¬åœ°** å¹¶å®‰è£…ä¾èµ–
3. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯** `git checkout -b feature/amazing-feature`
4. **æäº¤æ›´æ”¹** `git commit -m 'Add amazing feature'`
5. **æ¨é€åˆ†æ”¯** `git push origin feature/amazing-feature`
6. **åˆ›å»º Pull Request**

### ğŸ”’ å®‰å…¨è´¡çŒ®
**é‡è¦**: è´¡çŒ®ä»£ç æ—¶è¯·æ³¨æ„ï¼š
- **ä¸è¦æäº¤** çœŸå®çš„ `wrangler.toml` æ–‡ä»¶ï¼ˆå·²åŠ å…¥ `.gitignore`ï¼‰
- **ä¸è¦åŒ…å«** çœŸå®çš„ API å¯†é’¥æˆ–æ•æ„Ÿä¿¡æ¯
- **ä½¿ç”¨ç¯å¢ƒå˜é‡** å¼•ç”¨æ‰€æœ‰æ•æ„Ÿé…ç½®
- **æµ‹è¯•å®‰å…¨é…ç½®** ç¡®ä¿ä¸ä¼šæ³„éœ²æ•æ„Ÿä¿¡æ¯

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- **ğŸ“š GitHub**: [https://github.com/your-username/PicoPics](https://github.com/your-username/PicoPics)
- **ğŸ’¬ é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/your-username/PicoPics/issues)
- **ğŸ‘¨â€ğŸ’» ä½œè€…**: [Your Name](https://github.com/your-username)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** å¼€æºåè®® - è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶

---

<div align="center">

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼ğŸŒŸ**

</div>